/* This file was generated by SableCC's ObjectMacro. */

package org.sablecc.objectmacro.macro;

import java.util.LinkedList;
import java.util.List;

public class M_macro
        extends Macro {

    private final String p_macro_name;

    private final List<M_param_declaration> m_param_declaration = new LinkedList<M_param_declaration>();

    private final List<M_text_block_declaration> m_text_block_declaration = new LinkedList<M_text_block_declaration>();

    private final List<M_expand_declaration> m_expand_declaration = new LinkedList<M_expand_declaration>();

    private final List<M_public_top_level_constructor> m_public_top_level_constructor = new LinkedList<M_public_top_level_constructor>();

    private final List<M_package_top_level_constructor> m_package_top_level_constructor = new LinkedList<M_package_top_level_constructor>();

    private final List<M_sub_level_constructor> m_sub_level_constructor = new LinkedList<M_sub_level_constructor>();

    private final List<M_constructor_first_param> m_constructor_first_param = new LinkedList<M_constructor_first_param>();

    private final List<M_constructor_additional_param> m_constructor_additional_param = new LinkedList<M_constructor_additional_param>();

    private final List<M_sub_level_constructor_parent_initialisation> m_sub_level_constructor_parent_initialisation = new LinkedList<M_sub_level_constructor_parent_initialisation>();

    private final List<M_constructor_param_initialisation> m_constructor_param_initialisation = new LinkedList<M_constructor_param_initialisation>();

    private final List<M_constructor_text_block_initialisation> m_constructor_text_block_initialisation = new LinkedList<M_constructor_text_block_initialisation>();

    private final List<M_local_param_accessor> m_local_param_accessor = new LinkedList<M_local_param_accessor>();

    private final List<M_local_text_block_accessor> m_local_text_block_accessor = new LinkedList<M_local_text_block_accessor>();

    private final List<M_param_accessor> m_param_accessor = new LinkedList<M_param_accessor>();

    private final List<M_top_level_text_block_accessor> m_top_level_text_block_accessor = new LinkedList<M_top_level_text_block_accessor>();

    private final List<M_sub_level_text_block_accessor> m_sub_level_text_block_accessor = new LinkedList<M_sub_level_text_block_accessor>();

    private final List<M_submacro_creator> m_submacro_creator = new LinkedList<M_submacro_creator>();

    private final List<Macro> e_expand2 = new LinkedList<Macro>();

    private final List<Macro> e_expand3 = new LinkedList<Macro>();

    public M_macro(
            String p_macro_name) {

        this.p_macro_name = p_macro_name;
    }

    public M_package newM_package(
            String p_package_name) {

        M_package v_package = new M_package(p_package_name);
        this.e_expand2.add(v_package);
        return v_package;
    }

    public M_param_declaration newM_param_declaration(
            String p_param_name) {

        M_param_declaration v_param_declaration = new M_param_declaration(
                p_param_name);
        this.m_param_declaration.add(v_param_declaration);
        return v_param_declaration;
    }

    public M_text_block_declaration newM_text_block_declaration(
            String p_text_block_name) {

        M_text_block_declaration v_text_block_declaration = new M_text_block_declaration(
                p_text_block_name);
        this.m_text_block_declaration.add(v_text_block_declaration);
        return v_text_block_declaration;
    }

    public M_expand_declaration newM_expand_declaration(
            String p_expand_name) {

        M_expand_declaration v_expand_declaration = new M_expand_declaration(
                p_expand_name);
        this.m_expand_declaration.add(v_expand_declaration);
        return v_expand_declaration;
    }

    public M_public_top_level_constructor newM_public_top_level_constructor() {

        M_public_top_level_constructor v_public_top_level_constructor = new M_public_top_level_constructor();
        this.m_public_top_level_constructor.add(v_public_top_level_constructor);
        return v_public_top_level_constructor;
    }

    public M_package_top_level_constructor newM_package_top_level_constructor() {

        M_package_top_level_constructor v_package_top_level_constructor = new M_package_top_level_constructor();
        this.m_package_top_level_constructor
                .add(v_package_top_level_constructor);
        return v_package_top_level_constructor;
    }

    public M_sub_level_constructor newM_sub_level_constructor() {

        M_sub_level_constructor v_sub_level_constructor = new M_sub_level_constructor();
        this.m_sub_level_constructor.add(v_sub_level_constructor);
        return v_sub_level_constructor;
    }

    public M_constructor_first_param newM_constructor_first_param(
            String p_param_name) {

        M_constructor_first_param v_constructor_first_param = new M_constructor_first_param(
                p_param_name);
        this.m_constructor_first_param.add(v_constructor_first_param);
        return v_constructor_first_param;
    }

    public M_constructor_additional_param newM_constructor_additional_param(
            String p_param_name) {

        M_constructor_additional_param v_constructor_additional_param = new M_constructor_additional_param(
                p_param_name);
        this.m_constructor_additional_param.add(v_constructor_additional_param);
        return v_constructor_additional_param;
    }

    public M_sub_level_constructor_parent_initialisation newM_sub_level_constructor_parent_initialisation() {

        M_sub_level_constructor_parent_initialisation v_sub_level_constructor_parent_initialisation = new M_sub_level_constructor_parent_initialisation();
        this.m_sub_level_constructor_parent_initialisation
                .add(v_sub_level_constructor_parent_initialisation);
        return v_sub_level_constructor_parent_initialisation;
    }

    public M_constructor_param_initialisation newM_constructor_param_initialisation(
            String p_param_name) {

        M_constructor_param_initialisation v_constructor_param_initialisation = new M_constructor_param_initialisation(
                p_param_name);
        this.m_constructor_param_initialisation
                .add(v_constructor_param_initialisation);
        return v_constructor_param_initialisation;
    }

    public M_constructor_text_block_initialisation newM_constructor_text_block_initialisation(
            String p_text_block_name) {

        M_constructor_text_block_initialisation v_constructor_text_block_initialisation = new M_constructor_text_block_initialisation(
                p_text_block_name);
        this.m_constructor_text_block_initialisation
                .add(v_constructor_text_block_initialisation);
        return v_constructor_text_block_initialisation;
    }

    public M_local_param_accessor newM_local_param_accessor(
            String p_param_name) {

        M_local_param_accessor v_local_param_accessor = new M_local_param_accessor(
                p_param_name);
        this.m_local_param_accessor.add(v_local_param_accessor);
        return v_local_param_accessor;
    }

    public M_local_text_block_accessor newM_local_text_block_accessor(
            String p_text_block_name) {

        M_local_text_block_accessor v_local_text_block_accessor = new M_local_text_block_accessor(
                p_text_block_name);
        this.m_local_text_block_accessor.add(v_local_text_block_accessor);
        return v_local_text_block_accessor;
    }

    public M_param_accessor newM_param_accessor(
            String p_param_name,
            String p_containing_macro_name) {

        M_param_accessor v_param_accessor = new M_param_accessor(p_param_name,
                p_containing_macro_name);
        this.m_param_accessor.add(v_param_accessor);
        return v_param_accessor;
    }

    public M_top_level_text_block_accessor newM_top_level_text_block_accessor(
            String p_text_block_name) {

        M_top_level_text_block_accessor v_top_level_text_block_accessor = new M_top_level_text_block_accessor(
                p_text_block_name);
        this.m_top_level_text_block_accessor
                .add(v_top_level_text_block_accessor);
        return v_top_level_text_block_accessor;
    }

    public M_sub_level_text_block_accessor newM_sub_level_text_block_accessor(
            String p_text_block_name,
            String p_containing_macro_name) {

        M_sub_level_text_block_accessor v_sub_level_text_block_accessor = new M_sub_level_text_block_accessor(
                p_text_block_name, p_containing_macro_name);
        this.m_sub_level_text_block_accessor
                .add(v_sub_level_text_block_accessor);
        return v_sub_level_text_block_accessor;
    }

    public M_submacro_creator newM_submacro_creator(
            String p_submacro_name) {

        M_submacro_creator v_submacro_creator = new M_submacro_creator(
                p_submacro_name);
        this.m_submacro_creator.add(v_submacro_creator);
        return v_submacro_creator;
    }

    public M_text_append newM_text_append(
            String p_text) {

        M_text_append v_text_append = new M_text_append(p_text);
        this.e_expand3.add(v_text_append);
        return v_text_append;
    }

    public M_eol_append newM_eol_append() {

        M_eol_append v_eol_append = new M_eol_append();
        this.e_expand3.add(v_eol_append);
        return v_eol_append;
    }

    public M_escape_append newM_escape_append(
            String p_char) {

        M_escape_append v_escape_append = new M_escape_append(p_char);
        this.e_expand3.add(v_escape_append);
        return v_escape_append;
    }

    public M_var_append newM_var_append(
            String p_var_name) {

        M_var_append v_var_append = new M_var_append(p_var_name);
        this.e_expand3.add(v_var_append);
        return v_var_append;
    }

    public M_expand_append newM_expand_append(
            String p_expand_name) {

        M_expand_append v_expand_append = new M_expand_append(p_expand_name);
        this.e_expand3.add(v_expand_append);
        return v_expand_append;
    }

    public M_text_insert_append newM_text_insert_append(
            String p_text_insert_name) {

        M_text_insert_append v_text_insert_append = new M_text_insert_append(
                p_text_insert_name);
        this.e_expand3.add(v_text_insert_append);
        return v_text_insert_append;
    }

    public void appendTo(
            StringBuilder sb) {

        sb.append("/* This file was generated by SableCC's ObjectMacro. */");
        sb.append(System.getProperty("line.separator"));
        for (Macro v_Macro : this.e_expand2) {
            v_Macro.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("import java.util.*;");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("public class M_");
        sb.append(this.p_macro_name);
        sb.append(" extends Macro {");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- EOL ----");
        sb.append(System.getProperty("line.separator"));
        sb.append("  private static final String EOL = System.getProperty(");
        sb.append('"');
        sb.append("line.separator");
        sb.append('"');
        sb.append(");");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- parameters ----");
        sb.append(System.getProperty("line.separator"));
        for (M_param_declaration v_param_declaration : this.m_param_declaration) {
            v_param_declaration.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- text blocks ----");
        sb.append(System.getProperty("line.separator"));
        for (M_text_block_declaration v_text_block_declaration : this.m_text_block_declaration) {
            v_text_block_declaration.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- expands ----");
        sb.append(System.getProperty("line.separator"));
        for (M_expand_declaration v_expand_declaration : this.m_expand_declaration) {
            v_expand_declaration.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        for (M_public_top_level_constructor v_public_top_level_constructor : this.m_public_top_level_constructor) {
            v_public_top_level_constructor.appendTo(sb);
        }
        for (M_package_top_level_constructor v_package_top_level_constructor : this.m_package_top_level_constructor) {
            v_package_top_level_constructor.appendTo(sb);
        }
        for (M_sub_level_constructor v_sub_level_constructor : this.m_sub_level_constructor) {
            v_sub_level_constructor.appendTo(sb);
        }
        for (M_constructor_first_param v_constructor_first_param : this.m_constructor_first_param) {
            v_constructor_first_param.appendTo(sb);
        }
        for (M_constructor_additional_param v_constructor_additional_param : this.m_constructor_additional_param) {
            v_constructor_additional_param.appendTo(sb);
        }
        sb.append(") {");
        sb.append(System.getProperty("line.separator"));
        for (M_sub_level_constructor_parent_initialisation v_sub_level_constructor_parent_initialisation : this.m_sub_level_constructor_parent_initialisation) {
            v_sub_level_constructor_parent_initialisation.appendTo(sb);
        }
        for (M_constructor_param_initialisation v_constructor_param_initialisation : this.m_constructor_param_initialisation) {
            v_constructor_param_initialisation.appendTo(sb);
        }
        for (M_constructor_text_block_initialisation v_constructor_text_block_initialisation : this.m_constructor_text_block_initialisation) {
            v_constructor_text_block_initialisation.appendTo(sb);
        }
        sb.append("  }");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- local parameter accessors ----");
        sb.append(System.getProperty("line.separator"));
        for (M_local_param_accessor v_local_param_accessor : this.m_local_param_accessor) {
            v_local_param_accessor.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- local text block accessors ----");
        sb.append(System.getProperty("line.separator"));
        for (M_local_text_block_accessor v_local_text_block_accessor : this.m_local_text_block_accessor) {
            v_local_text_block_accessor.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- parameter accessors ----");
        sb.append(System.getProperty("line.separator"));
        for (M_param_accessor v_param_accessor : this.m_param_accessor) {
            v_param_accessor.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- text block accessors ----");
        sb.append(System.getProperty("line.separator"));
        for (M_top_level_text_block_accessor v_top_level_text_block_accessor : this.m_top_level_text_block_accessor) {
            v_top_level_text_block_accessor.appendTo(sb);
        }
        for (M_sub_level_text_block_accessor v_sub_level_text_block_accessor : this.m_sub_level_text_block_accessor) {
            v_sub_level_text_block_accessor.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("  // sub-macro creators");
        sb.append(System.getProperty("line.separator"));
        for (M_submacro_creator v_submacro_creator : this.m_submacro_creator) {
            v_submacro_creator.appendTo(sb);
        }
        sb.append(System.getProperty("line.separator"));
        sb.append("  // ---- append ----");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("  public void appendTo(StringBuilder sb) {");
        sb.append(System.getProperty("line.separator"));
        for (Macro v_Macro : this.e_expand3) {
            v_Macro.appendTo(sb);
        }
        sb.append("  }");
        sb.append(System.getProperty("line.separator"));
        sb.append("}");
        sb.append(System.getProperty("line.separator"));
    }

    public class M_param_declaration
            extends Macro {

        private final String p_param_name;

        M_param_declaration(
                String p_param_name) {

            this.p_param_name = p_param_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("  private final String p_");
            sb.append(this.p_param_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_text_block_declaration
            extends Macro {

        private final String p_text_block_name;

        M_text_block_declaration(
                String p_text_block_name) {

            this.p_text_block_name = p_text_block_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("  private final T_");
            sb.append(this.p_text_block_name);
            sb.append(" t_");
            sb.append(this.p_text_block_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_expand_declaration
            extends Macro {

        private final String p_expand_name;

        M_expand_declaration(
                String p_expand_name) {

            this.p_expand_name = p_expand_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("  private final List<Macro> e_");
            sb.append(this.p_expand_name);
            sb.append(" = new LinkedList<Macro>();");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_public_top_level_constructor
            extends Macro {

        M_public_top_level_constructor() {

        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("  // ---- parent ----");
            sb.append(System.getProperty("line.separator"));
            sb.append("  public Macro get_parent() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return null;");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
            sb.append(System.getProperty("line.separator"));
            sb.append("  // ---- constructor ----");
            sb.append(System.getProperty("line.separator"));
            sb.append("  public M_");
            sb.append(M_macro.this.p_macro_name);
            sb.append("(");
        }

    }

    public class M_package_top_level_constructor
            extends Macro {

        M_package_top_level_constructor() {

        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("  // ---- parent ----");
            sb.append(System.getProperty("line.separator"));
            sb.append("  public Macro get_parent() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return null;");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
            sb.append(System.getProperty("line.separator"));
            sb.append("  // ---- constructor ----");
            sb.append(System.getProperty("line.separator"));
            sb.append("  M_");
            sb.append(M_macro.this.p_macro_name);
            sb.append("(");
        }

    }

    public class M_sub_level_constructor
            extends Macro {

        M_sub_level_constructor() {

        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("  // ---- parent ----");
            sb.append(System.getProperty("line.separator"));
            sb.append("  private final Macro parent;");
            sb.append(System.getProperty("line.separator"));
            sb.append(System.getProperty("line.separator"));
            sb.append("  public Macro get_parent() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return this.parent;");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
            sb.append(System.getProperty("line.separator"));
            sb.append("  // ---- constructor ----");
            sb.append(System.getProperty("line.separator"));
            sb.append("  M_");
            sb.append(M_macro.this.p_macro_name);
            sb.append("(");
            sb.append(System.getProperty("line.separator"));
            sb.append("      Macro parent");
        }

    }

    public class M_constructor_first_param
            extends Macro {

        private final String p_param_name;

        M_constructor_first_param(
                String p_param_name) {

            this.p_param_name = p_param_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(System.getProperty("line.separator"));
            sb.append("      String p_");
            sb.append(this.p_param_name);
        }

    }

    public class M_constructor_additional_param
            extends Macro {

        private final String p_param_name;

        M_constructor_additional_param(
                String p_param_name) {

            this.p_param_name = p_param_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(",");
            sb.append(System.getProperty("line.separator"));
            sb.append("      String p_");
            sb.append(this.p_param_name);
        }

    }

    public class M_sub_level_constructor_parent_initialisation
            extends Macro {

        M_sub_level_constructor_parent_initialisation() {

        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    this.parent = parent;");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_constructor_param_initialisation
            extends Macro {

        private final String p_param_name;

        M_constructor_param_initialisation(
                String p_param_name) {

            this.p_param_name = p_param_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    this.p_");
            sb.append(this.p_param_name);
            sb.append(" = p_");
            sb.append(this.p_param_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_constructor_text_block_initialisation
            extends Macro {

        private final String p_text_block_name;

        M_constructor_text_block_initialisation(
                String p_text_block_name) {

            this.p_text_block_name = p_text_block_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    this.t_");
            sb.append(this.p_text_block_name);
            sb.append(" = new T_");
            sb.append(this.p_text_block_name);
            sb.append("(this);");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_local_param_accessor
            extends Macro {

        private final String p_param_name;

        M_local_param_accessor(
                String p_param_name) {

            this.p_param_name = p_param_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(System.getProperty("line.separator"));
            sb.append("  String get_local_p_");
            sb.append(this.p_param_name);
            sb.append("() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return this.p_");
            sb.append(this.p_param_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_local_text_block_accessor
            extends Macro {

        private final String p_text_block_name;

        M_local_text_block_accessor(
                String p_text_block_name) {

            this.p_text_block_name = p_text_block_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(System.getProperty("line.separator"));
            sb.append("  T_");
            sb.append(this.p_text_block_name);
            sb.append(" get_local_t_");
            sb.append(this.p_text_block_name);
            sb.append("() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return this.t_");
            sb.append(this.p_text_block_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_param_accessor
            extends Macro {

        private final String p_param_name;

        private final String p_containing_macro_name;

        M_param_accessor(
                String p_param_name,
                String p_containing_macro_name) {

            this.p_param_name = p_param_name;
            this.p_containing_macro_name = p_containing_macro_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(System.getProperty("line.separator"));
            sb.append("  private String cached_p_");
            sb.append(this.p_param_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append(System.getProperty("line.separator"));
            sb.append("  String get_p_");
            sb.append(this.p_param_name);
            sb.append("() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    String result = this.cached_p_");
            sb.append(this.p_param_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append("    if(result == null) {");
            sb.append(System.getProperty("line.separator"));
            sb.append("      Macro current = this;");
            sb.append(System.getProperty("line.separator"));
            sb.append("      while(!(current instanceof M_");
            sb.append(this.p_containing_macro_name);
            sb.append(")) {");
            sb.append(System.getProperty("line.separator"));
            sb.append("        current = current.get_parent();");
            sb.append(System.getProperty("line.separator"));
            sb.append("      }");
            sb.append(System.getProperty("line.separator"));
            sb.append("      result = ((M_");
            sb.append(this.p_containing_macro_name);
            sb.append(") current).get_local_p_");
            sb.append(this.p_param_name);
            sb.append("();");
            sb.append(System.getProperty("line.separator"));
            sb.append("      this.cached_p_");
            sb.append(this.p_param_name);
            sb.append(" = result;");
            sb.append(System.getProperty("line.separator"));
            sb.append("    }");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return result;");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_top_level_text_block_accessor
            extends Macro {

        private final String p_text_block_name;

        M_top_level_text_block_accessor(
                String p_text_block_name) {

            this.p_text_block_name = p_text_block_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(System.getProperty("line.separator"));
            sb.append("  private T_");
            sb.append(this.p_text_block_name);
            sb.append(" cached_t_");
            sb.append(this.p_text_block_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append(System.getProperty("line.separator"));
            sb.append("  T_");
            sb.append(this.p_text_block_name);
            sb.append(" get_t_");
            sb.append(this.p_text_block_name);
            sb.append("() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    T_");
            sb.append(this.p_text_block_name);
            sb.append(" result = this.cached_t_");
            sb.append(this.p_text_block_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append("    if(result == null) {");
            sb.append(System.getProperty("line.separator"));
            sb.append("      result = T_");
            sb.append(this.p_text_block_name);
            sb.append(".getInstance();");
            sb.append(System.getProperty("line.separator"));
            sb.append("      this.cached_t_");
            sb.append(this.p_text_block_name);
            sb.append(" = result;");
            sb.append(System.getProperty("line.separator"));
            sb.append("    }");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return result;");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_sub_level_text_block_accessor
            extends Macro {

        private final String p_text_block_name;

        private final String p_containing_macro_name;

        M_sub_level_text_block_accessor(
                String p_text_block_name,
                String p_containing_macro_name) {

            this.p_text_block_name = p_text_block_name;
            this.p_containing_macro_name = p_containing_macro_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(System.getProperty("line.separator"));
            sb.append("  private T_");
            sb.append(this.p_text_block_name);
            sb.append(" cached_t_");
            sb.append(this.p_text_block_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append(System.getProperty("line.separator"));
            sb.append("  T_");
            sb.append(this.p_text_block_name);
            sb.append(" get_t_");
            sb.append(this.p_text_block_name);
            sb.append("() {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    T_");
            sb.append(this.p_text_block_name);
            sb.append(" result = this.cached_t_");
            sb.append(this.p_text_block_name);
            sb.append(";");
            sb.append(System.getProperty("line.separator"));
            sb.append("    if(result == null) {");
            sb.append(System.getProperty("line.separator"));
            sb.append("      Macro current = this;");
            sb.append(System.getProperty("line.separator"));
            sb.append("      while(!(current instanceof M_");
            sb.append(this.p_containing_macro_name);
            sb.append(")) {");
            sb.append(System.getProperty("line.separator"));
            sb.append("        current = current.get_parent();");
            sb.append(System.getProperty("line.separator"));
            sb.append("      }");
            sb.append(System.getProperty("line.separator"));
            sb.append("      result = ((M_");
            sb.append(this.p_containing_macro_name);
            sb.append(") current).get_local_t_");
            sb.append(this.p_text_block_name);
            sb.append("();");
            sb.append(System.getProperty("line.separator"));
            sb.append("      this.cached_t_");
            sb.append(this.p_text_block_name);
            sb.append(" = result;");
            sb.append(System.getProperty("line.separator"));
            sb.append("    }");
            sb.append(System.getProperty("line.separator"));
            sb.append("    return result;");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_submacro_creator
            extends Macro {

        private final String p_submacro_name;

        private final List<M_submacro_first_parameter> m_submacro_first_parameter = new LinkedList<M_submacro_first_parameter>();

        private final List<M_submacro_additional_parameter> m_submacro_additional_parameter = new LinkedList<M_submacro_additional_parameter>();

        private final List<M_submacro_new_this_param> m_submacro_new_this_param = new LinkedList<M_submacro_new_this_param>();

        private final List<M_submacro_new_first_param> m_submacro_new_first_param = new LinkedList<M_submacro_new_first_param>();

        private final List<M_submacro_new_additional_param> m_submacro_new_additional_param = new LinkedList<M_submacro_new_additional_param>();

        private final List<M_add_to_expand> m_add_to_expand = new LinkedList<M_add_to_expand>();

        M_submacro_creator(
                String p_submacro_name) {

            this.p_submacro_name = p_submacro_name;
        }

        public M_submacro_first_parameter newM_submacro_first_parameter(
                String p_param_name) {

            M_submacro_first_parameter v_submacro_first_parameter = new M_submacro_first_parameter(
                    p_param_name);
            this.m_submacro_first_parameter.add(v_submacro_first_parameter);
            return v_submacro_first_parameter;
        }

        public M_submacro_additional_parameter newM_submacro_additional_parameter(
                String p_param_name) {

            M_submacro_additional_parameter v_submacro_additional_parameter = new M_submacro_additional_parameter(
                    p_param_name);
            this.m_submacro_additional_parameter
                    .add(v_submacro_additional_parameter);
            return v_submacro_additional_parameter;
        }

        public M_submacro_new_this_param newM_submacro_new_this_param() {

            M_submacro_new_this_param v_submacro_new_this_param = new M_submacro_new_this_param();
            this.m_submacro_new_this_param.add(v_submacro_new_this_param);
            return v_submacro_new_this_param;
        }

        public M_submacro_new_first_param newM_submacro_new_first_param(
                String p_param_name) {

            M_submacro_new_first_param v_submacro_new_first_param = new M_submacro_new_first_param(
                    p_param_name);
            this.m_submacro_new_first_param.add(v_submacro_new_first_param);
            return v_submacro_new_first_param;
        }

        public M_submacro_new_additional_param newM_submacro_new_additional_param(
                String p_param_name) {

            M_submacro_new_additional_param v_submacro_new_additional_param = new M_submacro_new_additional_param(
                    p_param_name);
            this.m_submacro_new_additional_param
                    .add(v_submacro_new_additional_param);
            return v_submacro_new_additional_param;
        }

        public M_add_to_expand newM_add_to_expand(
                String p_expand_name) {

            M_add_to_expand v_add_to_expand = new M_add_to_expand(p_expand_name);
            this.m_add_to_expand.add(v_add_to_expand);
            return v_add_to_expand;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append(System.getProperty("line.separator"));
            sb.append("  public M_");
            sb.append(this.p_submacro_name);
            sb.append(" new_");
            sb.append(this.p_submacro_name);
            sb.append("(");
            for (M_submacro_first_parameter v_submacro_first_parameter : this.m_submacro_first_parameter) {
                v_submacro_first_parameter.appendTo(sb);
            }
            for (M_submacro_additional_parameter v_submacro_additional_parameter : this.m_submacro_additional_parameter) {
                v_submacro_additional_parameter.appendTo(sb);
            }
            sb.append(") {");
            sb.append(System.getProperty("line.separator"));
            sb.append("    M_");
            sb.append(this.p_submacro_name);
            sb.append(" result = new M_");
            sb.append(this.p_submacro_name);
            sb.append("(");
            for (M_submacro_new_this_param v_submacro_new_this_param : this.m_submacro_new_this_param) {
                v_submacro_new_this_param.appendTo(sb);
            }
            for (M_submacro_new_first_param v_submacro_new_first_param : this.m_submacro_new_first_param) {
                v_submacro_new_first_param.appendTo(sb);
            }
            for (M_submacro_new_additional_param v_submacro_new_additional_param : this.m_submacro_new_additional_param) {
                v_submacro_new_additional_param.appendTo(sb);
            }
            sb.append(");");
            sb.append(System.getProperty("line.separator"));
            for (M_add_to_expand v_add_to_expand : this.m_add_to_expand) {
                v_add_to_expand.appendTo(sb);
            }
            sb.append("    return result;");
            sb.append(System.getProperty("line.separator"));
            sb.append("  }");
            sb.append(System.getProperty("line.separator"));
        }

        public class M_submacro_first_parameter
                extends Macro {

            private final String p_param_name;

            M_submacro_first_parameter(
                    String p_param_name) {

                this.p_param_name = p_param_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append(System.getProperty("line.separator"));
                sb.append("      String p_");
                sb.append(this.p_param_name);
            }

        }

        public class M_submacro_additional_parameter
                extends Macro {

            private final String p_param_name;

            M_submacro_additional_parameter(
                    String p_param_name) {

                this.p_param_name = p_param_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append(",");
                sb.append(System.getProperty("line.separator"));
                sb.append("      String p_");
                sb.append(this.p_param_name);
            }

        }

        public class M_submacro_new_this_param
                extends Macro {

            M_submacro_new_this_param() {

            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("this");
            }

        }

        public class M_submacro_new_first_param
                extends Macro {

            private final String p_param_name;

            M_submacro_new_first_param(
                    String p_param_name) {

                this.p_param_name = p_param_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("p_");
                sb.append(this.p_param_name);
            }

        }

        public class M_submacro_new_additional_param
                extends Macro {

            private final String p_param_name;

            M_submacro_new_additional_param(
                    String p_param_name) {

                this.p_param_name = p_param_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append(", p_");
                sb.append(this.p_param_name);
            }

        }

        public class M_add_to_expand
                extends Macro {

            private final String p_expand_name;

            M_add_to_expand(
                    String p_expand_name) {

                this.p_expand_name = p_expand_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("    e_");
                sb.append(this.p_expand_name);
                sb.append(".add(result);");
                sb.append(System.getProperty("line.separator"));
            }

        }

    }

    public class M_text_append
            extends Macro {

        private final String p_text;

        M_text_append(
                String p_text) {

            this.p_text = p_text;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    sb.append(");
            sb.append('"');
            sb.append(this.p_text);
            sb.append('"');
            sb.append(");");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_eol_append
            extends Macro {

        M_eol_append() {

        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    sb.append(EOL);");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_escape_append
            extends Macro {

        private final String p_char;

        M_escape_append(
                String p_char) {

            this.p_char = p_char;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    sb.append('");
            sb.append(this.p_char);
            sb.append("');");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_var_append
            extends Macro {

        private final String p_var_name;

        M_var_append(
                String p_var_name) {

            this.p_var_name = p_var_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    sb.append(get_p_");
            sb.append(this.p_var_name);
            sb.append("());");
            sb.append(System.getProperty("line.separator"));
        }

    }

    public class M_expand_append
            extends Macro {

        private final String p_expand_name;

        private final List<M_expand_append_none_string_part> m_expand_append_none_string_part = new LinkedList<M_expand_append_none_string_part>();

        private final List<M_expand_append_none_text_block> m_expand_append_none_text_block = new LinkedList<M_expand_append_none_text_block>();

        private final List<M_expand_append_before_first_string_part> m_expand_append_before_first_string_part = new LinkedList<M_expand_append_before_first_string_part>();

        private final List<M_expand_append_before_first_text_block> m_expand_append_before_first_text_block = new LinkedList<M_expand_append_before_first_text_block>();

        private final List<M_expand_append_separator_string_part> m_expand_append_separator_string_part = new LinkedList<M_expand_append_separator_string_part>();

        private final List<M_expand_append_separator_text_block> m_expand_append_separator_text_block = new LinkedList<M_expand_append_separator_text_block>();

        private final List<M_expand_append_after_last_string_part> m_expand_append_after_last_string_part = new LinkedList<M_expand_append_after_last_string_part>();

        private final List<M_expand_append_after_last_text_block> m_expand_append_after_last_text_block = new LinkedList<M_expand_append_after_last_text_block>();

        M_expand_append(
                String p_expand_name) {

            this.p_expand_name = p_expand_name;
        }

        public M_expand_append_none_string_part newM_expand_append_none_string_part(
                String p_none_string_part) {

            M_expand_append_none_string_part v_expand_append_none_string_part = new M_expand_append_none_string_part(
                    p_none_string_part);
            this.m_expand_append_none_string_part
                    .add(v_expand_append_none_string_part);
            return v_expand_append_none_string_part;
        }

        public M_expand_append_none_text_block newM_expand_append_none_text_block(
                String p_text_block_name) {

            M_expand_append_none_text_block v_expand_append_none_text_block = new M_expand_append_none_text_block(
                    p_text_block_name);
            this.m_expand_append_none_text_block
                    .add(v_expand_append_none_text_block);
            return v_expand_append_none_text_block;
        }

        public M_expand_append_before_first_string_part newM_expand_append_before_first_string_part(
                String p_before_first_string_part) {

            M_expand_append_before_first_string_part v_expand_append_before_first_string_part = new M_expand_append_before_first_string_part(
                    p_before_first_string_part);
            this.m_expand_append_before_first_string_part
                    .add(v_expand_append_before_first_string_part);
            return v_expand_append_before_first_string_part;
        }

        public M_expand_append_before_first_text_block newM_expand_append_before_first_text_block(
                String p_text_block_name) {

            M_expand_append_before_first_text_block v_expand_append_before_first_text_block = new M_expand_append_before_first_text_block(
                    p_text_block_name);
            this.m_expand_append_before_first_text_block
                    .add(v_expand_append_before_first_text_block);
            return v_expand_append_before_first_text_block;
        }

        public M_expand_append_separator_string_part newM_expand_append_separator_string_part(
                String p_separator_string_part) {

            M_expand_append_separator_string_part v_expand_append_separator_string_part = new M_expand_append_separator_string_part(
                    p_separator_string_part);
            this.m_expand_append_separator_string_part
                    .add(v_expand_append_separator_string_part);
            return v_expand_append_separator_string_part;
        }

        public M_expand_append_separator_text_block newM_expand_append_separator_text_block(
                String p_text_block_name) {

            M_expand_append_separator_text_block v_expand_append_separator_text_block = new M_expand_append_separator_text_block(
                    p_text_block_name);
            this.m_expand_append_separator_text_block
                    .add(v_expand_append_separator_text_block);
            return v_expand_append_separator_text_block;
        }

        public M_expand_append_after_last_string_part newM_expand_append_after_last_string_part(
                String p_after_last_string_part) {

            M_expand_append_after_last_string_part v_expand_append_after_last_string_part = new M_expand_append_after_last_string_part(
                    p_after_last_string_part);
            this.m_expand_append_after_last_string_part
                    .add(v_expand_append_after_last_string_part);
            return v_expand_append_after_last_string_part;
        }

        public M_expand_append_after_last_text_block newM_expand_append_after_last_text_block(
                String p_text_block_name) {

            M_expand_append_after_last_text_block v_expand_append_after_last_text_block = new M_expand_append_after_last_text_block(
                    p_text_block_name);
            this.m_expand_append_after_last_text_block
                    .add(v_expand_append_after_last_text_block);
            return v_expand_append_after_last_text_block;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    if(e_");
            sb.append(this.p_expand_name);
            sb.append(".size() == 0) {");
            sb.append(System.getProperty("line.separator"));
            for (M_expand_append_none_string_part v_expand_append_none_string_part : this.m_expand_append_none_string_part) {
                v_expand_append_none_string_part.appendTo(sb);
            }
            for (M_expand_append_none_text_block v_expand_append_none_text_block : this.m_expand_append_none_text_block) {
                v_expand_append_none_text_block.appendTo(sb);
            }
            sb.append("    }");
            sb.append(System.getProperty("line.separator"));
            sb.append("    else {");
            sb.append(System.getProperty("line.separator"));
            sb.append("      boolean first = true;");
            sb.append(System.getProperty("line.separator"));
            sb.append("      for(Macro macro : e_");
            sb.append(this.p_expand_name);
            sb.append(") {");
            sb.append(System.getProperty("line.separator"));
            sb.append("        if(first) {");
            sb.append(System.getProperty("line.separator"));
            sb.append("          first = false;");
            sb.append(System.getProperty("line.separator"));
            for (M_expand_append_before_first_string_part v_expand_append_before_first_string_part : this.m_expand_append_before_first_string_part) {
                v_expand_append_before_first_string_part.appendTo(sb);
            }
            for (M_expand_append_before_first_text_block v_expand_append_before_first_text_block : this.m_expand_append_before_first_text_block) {
                v_expand_append_before_first_text_block.appendTo(sb);
            }
            sb.append("        }");
            sb.append(System.getProperty("line.separator"));
            sb.append("        else {");
            sb.append(System.getProperty("line.separator"));
            for (M_expand_append_separator_string_part v_expand_append_separator_string_part : this.m_expand_append_separator_string_part) {
                v_expand_append_separator_string_part.appendTo(sb);
            }
            for (M_expand_append_separator_text_block v_expand_append_separator_text_block : this.m_expand_append_separator_text_block) {
                v_expand_append_separator_text_block.appendTo(sb);
            }
            sb.append("        }");
            sb.append(System.getProperty("line.separator"));
            sb.append("        macro.appendTo(sb);");
            sb.append(System.getProperty("line.separator"));
            sb.append("      }");
            sb.append(System.getProperty("line.separator"));
            for (M_expand_append_after_last_string_part v_expand_append_after_last_string_part : this.m_expand_append_after_last_string_part) {
                v_expand_append_after_last_string_part.appendTo(sb);
            }
            for (M_expand_append_after_last_text_block v_expand_append_after_last_text_block : this.m_expand_append_after_last_text_block) {
                v_expand_append_after_last_text_block.appendTo(sb);
            }
            sb.append("    }");
            sb.append(System.getProperty("line.separator"));
        }

        public class M_expand_append_none_string_part
                extends Macro {

            private final String p_none_string_part;

            M_expand_append_none_string_part(
                    String p_none_string_part) {

                this.p_none_string_part = p_none_string_part;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("      sb.append(");
                sb.append('"');
                sb.append(this.p_none_string_part);
                sb.append('"');
                sb.append(");");
                sb.append(System.getProperty("line.separator"));
            }

        }

        public class M_expand_append_none_text_block
                extends Macro {

            private final String p_text_block_name;

            M_expand_append_none_text_block(
                    String p_text_block_name) {

                this.p_text_block_name = p_text_block_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("      get_t_");
                sb.append(this.p_text_block_name);
                sb.append("().appendTo(sb);");
                sb.append(System.getProperty("line.separator"));
            }

        }

        public class M_expand_append_before_first_string_part
                extends Macro {

            private final String p_before_first_string_part;

            M_expand_append_before_first_string_part(
                    String p_before_first_string_part) {

                this.p_before_first_string_part = p_before_first_string_part;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("          sb.append(");
                sb.append('"');
                sb.append(this.p_before_first_string_part);
                sb.append('"');
                sb.append(");");
                sb.append(System.getProperty("line.separator"));
            }

        }

        public class M_expand_append_before_first_text_block
                extends Macro {

            private final String p_text_block_name;

            M_expand_append_before_first_text_block(
                    String p_text_block_name) {

                this.p_text_block_name = p_text_block_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("          get_t_");
                sb.append(this.p_text_block_name);
                sb.append("().appendTo(sb);");
                sb.append(System.getProperty("line.separator"));
            }

        }

        public class M_expand_append_separator_string_part
                extends Macro {

            private final String p_separator_string_part;

            M_expand_append_separator_string_part(
                    String p_separator_string_part) {

                this.p_separator_string_part = p_separator_string_part;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("          sb.append(");
                sb.append('"');
                sb.append(this.p_separator_string_part);
                sb.append('"');
                sb.append(");");
                sb.append(System.getProperty("line.separator"));
            }

        }

        public class M_expand_append_separator_text_block
                extends Macro {

            private final String p_text_block_name;

            M_expand_append_separator_text_block(
                    String p_text_block_name) {

                this.p_text_block_name = p_text_block_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("          get_t_");
                sb.append(this.p_text_block_name);
                sb.append("().appendTo(sb);");
                sb.append(System.getProperty("line.separator"));
            }

        }

        public class M_expand_append_after_last_string_part
                extends Macro {

            private final String p_after_last_string_part;

            M_expand_append_after_last_string_part(
                    String p_after_last_string_part) {

                this.p_after_last_string_part = p_after_last_string_part;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("      sb.append(");
                sb.append('"');
                sb.append(this.p_after_last_string_part);
                sb.append('"');
                sb.append(");");
                sb.append(System.getProperty("line.separator"));
            }

        }

        public class M_expand_append_after_last_text_block
                extends Macro {

            private final String p_text_block_name;

            M_expand_append_after_last_text_block(
                    String p_text_block_name) {

                this.p_text_block_name = p_text_block_name;
            }

            public void appendTo(
                    StringBuilder sb) {

                sb.append("      get_t_");
                sb.append(this.p_text_block_name);
                sb.append("().appendTo(sb);");
                sb.append(System.getProperty("line.separator"));
            }

        }

    }

    public class M_text_insert_append
            extends Macro {

        private final String p_text_insert_name;

        M_text_insert_append(
                String p_text_insert_name) {

            this.p_text_insert_name = p_text_insert_name;
        }

        public void appendTo(
                StringBuilder sb) {

            sb.append("    get_t_");
            sb.append(this.p_text_insert_name);
            sb.append("().appendTo(sb);");
            sb.append(System.getProperty("line.separator"));
        }

    }

}
