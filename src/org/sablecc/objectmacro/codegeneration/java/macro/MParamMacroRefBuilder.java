/* This file was generated by SableCC's ObjectMacro. */

package org.sablecc.objectmacro.codegeneration.java.macro;

import java.util.*;

public class MParamMacroRefBuilder {

    private final String pName;

    private final MParamMacroRefBuilder mParamMacroRefBuilder = this;

    private final List<Object> eContextName = new LinkedList<>();

    public MParamMacroRefBuilder(
            String pName) {

        if (pName == null) {
            throw new NullPointerException();
        }
        this.pName = pName;
    }

    public MContextName newContextName(
            String pContextName) {

        MContextName lContextName = new MContextName(pContextName);
        this.eContextName.add(lContextName);
        return lContextName;
    }

    String pName() {

        return this.pName;
    }

    private String rName() {

        return this.mParamMacroRefBuilder.pName();
    }

    @Override
    public String toString() {

        StringBuilder sb = new StringBuilder();
        sb.append("    private String build");
        sb.append(rName());
        sb.append("(){");
        sb.append(System.getProperty("line.separator"));
        sb.append("        StringBuilder sb = new StringBuilder();");
        sb.append(System.getProperty("line.separator"));
        sb.append("        Context local_context = ");
        if (this.eContextName.size() == 0) {
            sb.append("context");
        }
        for (Object oContextName : this.eContextName) {
            sb.append(oContextName.toString());
        }
        sb.append(";");
        sb.append(System.getProperty("line.separator"));
        sb.append("        List<Macro> macros = this.list_");
        sb.append(rName());
        sb.append(";");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("        int i = 0;");
        sb.append(System.getProperty("line.separator"));
        sb.append("        int nb_macros = macros.size();");
        sb.append(System.getProperty("line.separator"));
        sb.append("        String expansion = null;");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("        if(this.");
        sb.append(rName());
        sb.append("None != null){");
        sb.append(System.getProperty("line.separator"));
        sb.append("            sb.append(this.");
        sb.append(rName());
        sb.append("None.apply(i, \"\", nb_macros));");
        sb.append(System.getProperty("line.separator"));
        sb.append("        }");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("        for(Macro macro : macros){");
        sb.append(System.getProperty("line.separator"));
        sb.append("            expansion = macro.build(local_context);");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("            if(this.");
        sb.append(rName());
        sb.append("BeforeFirst != null){");
        sb.append(System.getProperty("line.separator"));
        sb.append("                expansion = this.");
        sb.append(rName());
        sb.append("BeforeFirst.apply(i, expansion, nb_macros);");
        sb.append(System.getProperty("line.separator"));
        sb.append("            }");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("            if(this.");
        sb.append(rName());
        sb.append("AfterLast != null){");
        sb.append(System.getProperty("line.separator"));
        sb.append("                expansion = this.");
        sb.append(rName());
        sb.append("AfterLast.apply(i, expansion, nb_macros);");
        sb.append(System.getProperty("line.separator"));
        sb.append("            }");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("            if(this.");
        sb.append(rName());
        sb.append("Separator != null){");
        sb.append(System.getProperty("line.separator"));
        sb.append("                expansion = this.");
        sb.append(rName());
        sb.append("Separator.apply(i, expansion, nb_macros);");
        sb.append(System.getProperty("line.separator"));
        sb.append("            }");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("            sb.append(expansion);");
        sb.append(System.getProperty("line.separator"));
        sb.append("            i++;");
        sb.append(System.getProperty("line.separator"));
        sb.append("        }");
        sb.append(System.getProperty("line.separator"));
        sb.append(System.getProperty("line.separator"));
        sb.append("        return sb.toString();");
        sb.append(System.getProperty("line.separator"));
        sb.append("    }");
        sb.append(System.getProperty("line.separator"));
        return sb.toString();
    }

}
