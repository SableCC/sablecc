/* This file was generated by SableCC's ObjectMacro. */

package org.sablecc.objectmacro.errormessage;
import java.util.*;

public class CycleDetector {

    private Macro receiver;

    private Set<Macro> visited;

    void detectCycle(
            Macro receiver,
            Macro added){

        this.visited = new LinkedHashSet<>();
        this.receiver = receiver;
        detectCycle(added);
    }

    private void detectCycle(
            Macro macro){

        if(this.visited.contains(macro)){
            return;
        }

        if(macro == this.receiver){
            throw ObjectMacroException.cyclicReference(macro.getClass().getSimpleName());
        }

        this.visited.add(macro);

        for(Macro child : macro.getChildren()){
            detectCycle(child);
        }
    }
}